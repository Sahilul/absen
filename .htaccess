# Smart Absensi - Apache Configuration
# Untuk Shared Hosting dan Production

<IfModule mod_rewrite.c>
  RewriteEngine On
  
  # Force HTTPS (optional, uncomment jika sudah punya SSL)
  # RewriteCond %{HTTPS} off
  # RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]
  
  # Allow direct access to uploaded files
  RewriteCond %{REQUEST_URI} ^/uploads/ [NC]
  RewriteRule ^(.*)$ public/$1 [L]
  
  # Redirect ke folder public jika belum
  RewriteCond %{REQUEST_URI} !^/public/
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^(.*)$ public/$1 [L,QSA]
  
  # Redirect index.php ke root public
  RewriteCond %{THE_REQUEST} /index\.php [NC]
  RewriteRule ^(.*)index\.php$ /$1 [R=301,L,NC]
</IfModule>

# Protect sensitive files
<FilesMatch "^\.">
  Order allow,deny
  Deny from all
</FilesMatch>

# Prevent directory listing
Options -Indexes

# PHP Configuration (optional)
<IfModule mod_php7.c>
  php_value upload_max_filesize 50M
  php_value post_max_size 50M
  php_value max_execution_time 300
  php_value max_input_time 300
</IfModule>

<IfModule mod_php8.c>
  php_value upload_max_filesize 50M
  php_value post_max_size 50M
  php_value max_execution_time 300
  php_value max_input_time 300
</IfModule>
